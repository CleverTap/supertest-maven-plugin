# Supertest Maven Plugin
Supertest has been written to reduce the time it takes to build a maven project that uses the [Maven Surefire Plugin](https://maven.apache.org/surefire/maven-surefire-plugin/) during the test phase of the build lifecycle to execute its unit tests.

## Problem
Even by using the Surefire plugin, the testing times can be super long because Surefire runs all the tests for a particular class inside the same fork, which results in the pollution of the shared environment and hence constant failures even on retrying. 

Before Supertest, a module with failed test cases was run multiple times. This meant that even the passing test cases were rerun which caused horrendous build times. But now with Supertest, we only rerun the failing test cases.

We do so by parsing the XML reports generated by Surefire and rerunning only the failing tests with `reuse forks` set as `false`.


## Assumptions
Since Surefire does not provide any documentation regarding what each tag in their XML reports signifies, we came up with the following tags for detecting failed testcases (purely on experimental basis): 
* failure
* rerunFailure
* error
* rerunError

## Prerequisites
The current version of Supertest requires a locally installed instance of maven. Please ensure that running `mvn --version` on terminal works.

## Adding Supertest to a project

To use Supertest, follow these steps:

Add the following code to `POM.xml` of the project you wish to use supertest with:
```
<build>
    <plugin>
        <groupId>com.clevertap</groupId>
        <artifactId>supertest-maven-plugin</artifactId>
        <version>1.3-SNAPSHOT</version>
    </plugin>
</build>
```
After completing the above step, Supertest is ready to be used with your project.
```
mvn supertest:supertest
```
Currently, the goal of the maven plugin is also `supertest`.

Additionally, maven test options can also be sent as command line arguments like so
```
-DmvnTestOpts="-P jacoco -fae jacoco:report"
```

## Setting up Supertest for local development


Navigate to the directory where supertest is cloned and run the following command:
```
mvn install
```
The above command will install supertest in your local Maven repository `.m2/repository`